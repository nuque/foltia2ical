apply plugin: 'java'
apply plugin: 'eclipse'

group = 'foltia2ical'

sourceCompatibility = targetCompatibility = '1.8'

repositories {
  mavenCentral()
}

dependencies {
    compile 'com.sparkjava:spark-core:2.1'
    compile 'org.mnode.ical4j:ical4j:1.0.3'
    compile 'postgresql:postgresql:9.1-901-1.jdbc4'
    compile 'org.apache.commons:commons-collections4:4.0'
}

jar {
  doFirst {
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } } 
  }
  exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA' 
  manifest {
    attributes 'Implementation-Title': 'foltia2ical', 'Implementation-Version': 1.0
    attributes "Main-Class" : "com.nqlab.tools.foltia.foltia2ical.Foltia2iCal"
  }
  from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
}

task execJava (type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    main = "com.nqlab.tools.foltia.foltia2ical"
}
